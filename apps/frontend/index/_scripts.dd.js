window.addEventListener('load',function(){set_cta()});function set_cta(){dd_submit({target:"#submit_number > form",url:"app/index/submit_number",callback:function(e){cta('cta_success');setTimeout(()=>{cta('no')},5000);if(dd("#submit_number [name='schedule']").val()!='none'){dd("#submit_number [name='schedule']").val("set")}}});var active_cta=dd("#cta > [name='active_cta']").val();if(active_cta!='none'){setTimeout(()=>{cta(active_cta)},3000)}}
function cta(cta){var current_cta=dd(".current_cta");var next_cta=dd('#'+cta).select();if(cta=='no'){dd("#cta").fadeOut(400)}else if(current_cta.select()){current_cta.fadeOut(400);dd("#cta").show();setTimeout(function(){current_cta.select().classList.remove('current_cta');next_cta.classList.add('current_cta');dd(next_cta).fadeIn(400)},500)}else{dd("#cta").fadeIn(400);next_cta.classList.add('current_cta')}}
function cta_form(action){if(action=="success"){dd("#submit_number > form [name='where_next']").val("success");dd("#submit_number > p").html("Please submit your phone number below and we'll call you to answer all your questions");dd("#cta_success > p").html("We have gotten your phone number and would call you as soon as possible. If you still have time, you can use the 'Facebook' link at the bottom to explore our page.")}else if(action=="continue"){dd("#submit_number > form [name='where_next']").val("success");dd("#submit_number > p").html("Please submit your phone number so we can call to make an arrangement");dd("#cta_success > p").html("We've taken note of your details, and will call you soon. Meanwhile, enjoy going through our website to see why our school stand out.")}else if(action=="end"){dd("#submit_number > form [name='where_next']").val("success");dd("#submit_number > p").html("Please submit your phone number so we can call to make an arrangement");dd("#cta_success > p").html("Thank you so much for taking out the time to go through our website. We will call you soon to discuss further.")}
cta('submit_number')}
function select_schedule(schedule){dd_ajax({url:"app/index/schedule",data:"schedule="+schedule,method:"POST",expecting:"JSON",ready:function(response){if(dd(response).isEmpty()){dd("#submit_number [name='schedule']").val(schedule);cta_form('end')}else{dd("#cta_success > p").html("Thank you so much for taking out the time to go through our website. We have taken note of your schedule and will call you soon.");cta('cta_success');dd("#submit_number [name='schedule']").val("set")}}})}
window.addEventListener('load',function(){dd("#loading_cover").fadeOut(500);setTimeout(()=>{dd("#iframe_map").select().src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3971.0235317057222!2d5.792473513560625!3d5.5635298959662585!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1041adb341059367%3A0x85ef7875cfab9aab!2sBlue%20Diamond%20School!5e0!3m2!1sen!2sng!4v1600442938081!5m2!1sen!2sng"},10000);var scrollElement=document.querySelector('#contact');var scrollActivated=!1;function displayCta(){if(scrollElement.getBoundingClientRect().top<=0){if(dd("#submit_number [name='schedule']").val()=='set'){dd("#cta_success > p").html("Thank you so much for taking out the time to go through our website. We have taken note of your schedule and will call you soon.");cta('cta_success')}else{cta("cta_schedule")}
window.removeEventListener("scroll",displayCta)}};window.addEventListener("scroll",displayCta)});function slide(next_view=''){var current_view=dd("#features .current_view");current_view.fadeOut(500);dd("#features").select().scrollIntoView();if(next_view==''){if(current_view.select().id=='feature4'){var next_element=dd("#feature1").select()}else{var next_element=current_view.select().nextSibling}}else{var next_element=dd("#features #"+next_view).select()}
console.log(next_view);console.log(next_element);setTimeout(()=>{current_view.select().classList.remove("current_view");next_element.classList.add("current_view");dd(next_element).fadeIn(500);dd("#features .current_slide").select().classList.remove("current_slide");dd("#features [data-slide='"+next_element.id+"']").select().classList.add("current_slide")},700)}function latest_update(){dd('#updates').fadeIn(500);dd_load({url:"app/index/announcement",target:"#updates",nodata:function(){dd("#updates p").html("No new updates so far");dd("#updates small").hide();dd("#updates .for_more").hide()}})}